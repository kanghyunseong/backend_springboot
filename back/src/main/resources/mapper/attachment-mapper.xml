<mapper namespace="com.kh.pcar.back.file.model.dao.AttachmentMapper">

    <insert id="insertAttachment"
            parameterType="com.kh.pcar.back.file.model.vo.AttachmentVO">
        INSERT INTO TB_ATTACHMENT (
             FILE_NO
           , REF_INO
           , ORIGIN_NAME
           , CHANGE_NAME
           , FILE_PATH
           , STATUS
        )
        VALUES (
             SEQ_FNO.NEXTVAL
           , #{refIno}
           , #{originName}
           , #{changeName}
           , #{filePath}
           , #{status}
        )
    </insert>

    <!-- 특정 게시글의 첨부파일 목록 -->
    <select id="findByRefIno"
            resultType="com.kh.pcar.back.file.model.vo.AttachmentVO"
            parameterType="long">
        SELECT
             FILE_NO     fileNo
           , REF_INO     refIno
           , ORIGIN_NAME originName
           , CHANGE_NAME changeName
           , FILE_PATH   filePath
           , STATUS      status
        FROM TB_ATTACHMENT
        WHERE REF_INO = #{refIno}
          AND STATUS = 'Y'
        ORDER BY FILE_NO
    </select>

</mapper>
