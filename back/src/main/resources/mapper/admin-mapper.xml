<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.kh.pcar.back.admin.user.model.dao.UserMapper">

	<select id="findAllMember" resultType="com.kh.pcar.back.admin.user.model.dto.UserDTO">
		SELECT
			    USER_NO AS userNo
			  , USER_ID AS userId
			  , USER_NAME AS userName
			  , BIRTHDAY AS birthday
			  , EMAIL AS email
			  , PHONE AS phone 
			  , USER_ROLL AS userRoll 
			  , LICENSE_IMG AS licenseImg
			  , STATUS AS status 
			  , ENROLL_DATE AS enrollDate
			  , LICENSE_STATUS AS licenseStatus
		  FROM
			   TB_MEMBER
	     WHERE
			   STATUS = 'Y' 
	     ORDER 
	        BY
			   USER_NO DESC
	</select>
	
	<select id="getTotalCount" resultType="_int">
		SELECT
			   COUNT(*)
		 FROM
			  TB_MEMBER 
	    WHERE
			   STATUS = 'Y' 
	</select>
	
	<update id="deleteUserStatus">
		UPDATE 
		       TB_MEMBER
		   SET
		       STATUS = 'N'  WHERE
		       USER_NO = #{userNo}
	</update>
	
	<update id="updateUser">
		UPDATE 
		       TB_MEMBER
           SET 
           	   USER_NAME = #{userName}
             , EMAIL = #{email}
             , PHONE = #{phone}
             , LICENSE_STATUS = #{licenseStatus}
         WHERE 
         	   USER_NO = #{userNo}
	</update>
	<select id="findByUserNo" resultType="com.kh.pcar.back.admin.user.model.dto.UserDTO">
    SELECT
           USER_NO AS userNo 
         , USER_ID AS userId 
         , USER_NAME AS userName 
         , BIRTHDAY AS birthday
         , EMAIL AS email
         , PHONE AS phone 
         , USER_ROLL AS userRoll 
         , LICENSE_IMG AS licenseImg
         , STATUS AS status 
         , ENROLL_DATE AS enrollDate
         , LICENSE_STATUS AS licenseStatus
      FROM
           TB_MEMBER
     WHERE
           USER_NO = #{userNo}
</select>
	
</mapper>